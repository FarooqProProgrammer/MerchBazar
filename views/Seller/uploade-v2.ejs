<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Design Your Product</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="<%- baseUrl -%>Seller/css/uploader-v2.css">
  <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" media="all" href="<%- baseUrl -%>/Seller/css/style.css" />
  <link rel="stylesheet" href="<%- baseUrl -%>/frontend/css/style.css">
  <link rel="stylesheet" href="<%- baseUrl -%>Seller/css/jquery-ui.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.3/jquery-ui.min.js"></script>
</head>

<body class="current-user">

  <style>
    .hidden {
      display: none !important;
    }

    .uploadImageContainer {
      width: 100%;
      height: auto;
      padding-top: 10px;
      padding-bottom: 10px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 20px;
    }

    .uploadImagePreview {
      width: 200px;
      height: 200px;
      border: 1px solid #000;
      border-radius: 10px;
      background-color: white;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .uploadImagePreview svg {
      width: 30px;
      height: 30px;
    }
  </style>
  <header class="header">
    <div class="container">
      <div class="d-flex flex-wrap flex-lg-nowrap justify-content-between align-items-center">
        <div class="logo">
          <a href="#">
            <img src="<%- baseUrl -%>/frontend/images/logo.png" alt="" class="img-fluid">
          </a>
        </div>
        <div class="main-menu">
          <ul class="list-unstyled">
            <li><a href="<%- baseUrl -%>">Home</a></li>
            <li><a href="<%- baseUrl -%>/marketplace">Marketplace</a></li>
            <li><a href="<%- baseUrl -%>/about">About</a></li>
            <li><a href="#">Work With Us</a></li>
            <li><a href="<%- baseUrl -%>/contact">Contact</a></li>
          </ul>
        </div>
        <div class="icon-list">
          <ul class="list-unstyled">
            <li><a href="<%- baseUrl -%>seller"><i class="fa-regular fa-user"></i></a></li>
            <li><a href="#"><i class="fa-solid fa-magnifying-glass"></i></a></li>
            <li><a href="#"><i class="fa-regular fa-heart"></i></a></li>
            <li>
              <a href="<%- baseUrl -%>cart" class="position-relative">
                <i class="fa-solid fa-cart-shopping"></i>
                <span class="badge bg-secondary position-absolute counterBadge"></span>
              </a>

            </li>
            <li><a href="" id="main-menu-btn"><i class="fa-solid fa-bars"></i></a></li>
          </ul>
        </div>
      </div>
    </div>
  </header>


  <input type="hidden" value="<%- design_upload -%>" id="hiddenId">

  <% if(design_upload==='false' ){ %>
  <div class="uploadImageContainer" id="uploadImage">
    <h1 class='m-uploader__header'>
      Upload A Design
    </h1>
    <label for="uploadDesignImage" class="uploadImagePreview">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
        <!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
        <path d="M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z" />
      </svg>
    </label>
    <input type="file" hidden style="display: none;" name="" id="uploadDesignImage">
  </div>
  <div class="d-flex justify-content-center align-items-center">
    <button class="btn btn-primary" id="uploadDesign">Upload Design</button>
  </div>
  <% } %>





  <div class="main-wrapper">
    <div id="site">
      <div id="content">
        <div class="flash x">
        </div>
        <div class="dropper-container hidden">
          <img id="dropper" src="https://res.cloudinary.com/teepublic/image/private/s--rB8zeJsG--/l_text:helvetica_16_bold:379f06c0ee9ff270339050b555fd95e7b5bc4fdc,o_0/c_limit,f_png,h_500,q_90/v1458927364/production/designs/458065_1.png">
          <div class="dropper-shade"></div>
        </div>

        <div class="contain">

          <div class="row" id="cloudinary-uploader">
            <form class="edit_design" id="edit_design_59368987">

              <div class="jsUploaderArtwork">

                <% if(design_upload=='true' ) { %>
                <h1 class="m-uploader__header">
                  Upload A Design
                </h1>


                <div class="m-uploader__artwork-management jsArtworkManagment">

                  <a class="m-uploader__help-uploading link--strong" tabindex="1" target="_blank">
                    Need help uploading?
                  </a>


                  <div class="m-uploader__dropzone jsUploaderDropzone" style="display: none">
                    <span class="teepublicon teepublicon--grey-default teepublicon-background--transparent m-uploader__dropzone-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="16" height="16" focusable="false" aria-hidden="true">
                        <path d="M15.482 33.439V31.57h.664c.248 0 .608.034.833.27.202.203.225.473.225.675 0 .18-.012.484-.248.687-.236.213-.619.236-.821.236h-.653Z">
                        </path>
                        <path fill-rule="evenodd" d="M29.615 0H10.03C8.673 0 7.515.48 6.557 1.442 5.599 2.404 5 3.804 5 5.166v39.906c0 1.362.499 2.524 1.497 3.486C7.495 49.519 8.673 50 10.03 50h29.94c1.357 0 2.535-.48 3.533-1.442.998-.962 1.497-2.124 1.497-3.486V15.437a1 1 0 0 0-.292-.706L30.323.294A1 1 0 0 0 29.615 0Zm-1.56 17.488a.6.6 0 0 1-.6-.6V5.169a.6.6 0 0 1 1.023-.425l11.779 11.719a.6.6 0 0 1-.423 1.025H28.055ZM15.483 35.014h1.226c.585 0 1.282-.079 1.867-.653.585-.573.664-1.271.664-1.867 0-.63-.112-1.26-.697-1.823-.574-.551-1.25-.675-1.902-.675h-3.105V37.5h1.947v-2.486Zm4.792 2.486h1.946v-4.59l3.589 4.59h1.946v-7.504H25.81v4.59l-3.589-4.59h-1.946V37.5Zm12.656-4.252v1.518h1.598a1.334 1.334 0 0 1-.462.833c-.348.292-.742.349-1.08.349-.573 0-1.012-.192-1.372-.574-.349-.372-.596-.934-.596-1.62 0-.585.214-1.283.652-1.721a1.812 1.812 0 0 1 1.283-.518c.371 0 .72.101 1.046.371.191.158.405.405.54.754l1.856-.765c-.27-.585-.754-1.181-1.339-1.541-.573-.349-1.327-.506-2.025-.506-1.327 0-2.294.483-2.913 1.102-.653.641-1.125 1.62-1.125 2.813 0 1.237.517 2.148 1.08 2.71.607.62 1.53 1.114 2.88 1.114.956 0 1.856-.213 2.643-.944.9-.833 1.204-1.89 1.204-3.375h-3.87Z" clip-rule="evenodd"></path>
                      </svg></span>
                    <div class="m-uploader__dropzone-message">
                      Drop one file here or
                    </div>
                    <div class="m-uploader__dropzone-clickable">
                      click to upload
                    </div>
                    <div class="m-uploader__loading-overlay jsLoadingOverlay" style="display: none;">
                      <div class="m-uploader__loading-icon"></div>
                    </div>
                  </div>


                  <div class="m-uploader__current-artwork jsUploaderCurrentArtwork">
                    <img id="uploader-preview-image" src="">
                  </div>
                  <a id="changeArtwork" class="jsChangeArtwork m-uploader__change-artwork btn btn--medium" tabindex="1">Change
                    Artwork</a>




                  <div class="m-uploader__messaging-area">
                    <div class="m-uploader__error-box" id="jsImageSizeError" style="display: none;">
                      <div id="flash-notice-red">
                        Your artwork is
                        <span id="jsSizeErrorWidth">3484</span>
                        px x
                        <span id="jsSizeErrorHeight">2531</span>
                        px and is not large enough to be printed.
                        Your design must be at least 1500px wide
                        OR 1995px tall (this does not include transparent pixels).
                      </div>
                    </div>
                    <div class="m-uploader__notice-box jsPrintAvailability" style="">Your image
                      isn't large enough to support all our Wall Art options. The largest size
                      your image supports is Medium (16" x 24").</div>
                    <div class="m-uploader__notice-box jsTapestryAvailability" style="display: none;">
                      <div id="flash-notice-yellow">
                        Your artwork must be at least 2434px wide or tall to enable
                        tapestries.
                      </div>
                    </div>
                    <div class="notice-box hidden">
                      <div class="notice">
                        <div>
                          <strong class="notice__title">File Requirements:</strong>
                          PNG with a transparent background. Please make sure artwork is
                          set to at least 40% opacity, 8 bit color, and is at least 150
                          DPI (300 DPI recommended for art prints). File should be at
                          least
                          <b>1500px&nbsp;x&nbsp;1995px</b>
                          for apparel and
                          <b>5500px&nbsp;x&nbsp;5000px</b>
                          to print on the largest size art print.
                        </div>
                        <div class="activate-orig-artfile-upload">
                          <strong class="notice__title">Design Guide:</strong>
                          Check out this helpful
                          <a target="_blank" tabindex="1" href="https://assets.teepublic.com/assets/pdfs/designing-for-dtg-061ba741bd403ab1a5d84d0ed3ce584bae150e47068f0a275f72e64e8b577189.pdf">design
                            guide</a>
                          for best practices when designing your art for TeePublic.
                        </div>
                      </div>
                    </div>
                    <div class="m-uploader__container--cool">
                      <div>
                        <strong class="notice__title">
                          File Requirements:
                        </strong>
                        <br>
                        A high-resolution
                        <strong>transparent .PNG</strong>
                        at
                        <strong>150dpi.</strong>
                        Minimum dimensions of at least
                        <strong>1500px by 1995px</strong>
                        (not including outer transparent pixels).
                        <br>
                      </div>
                      <div>
                        To enable
                        <strong>all</strong>
                        products, your file must be at least
                        <strong>5000px by 5500px.</strong>
                        <a target="_blank" href="https://assets.teepublic.com/assets/pdfs/designing-for-dtg-061ba741bd403ab1a5d84d0ed3ce584bae150e47068f0a275f72e64e8b577189.pdf" class="link link--strong link--1 link--default">
                          <span class="link__content">
                            See our design guide for help.
                          </span>

                        </a>
                      </div>
                    </div>

                  </div>
                </div>


                <div class="jsProductEditor" id="product-editor" style="">

                  <div class="m-uploader__container--neutral jsUploaderTextFields" style="">
                    <div class="m-uploader__form">
                      <input type="hidden" name="" id="artistId" value="<%- artistData[0]._id -%>">
                      <div class="col-lg-6 col-md-12">
                        <div class="form__field">
                          <label class="label--heavy">
                            Design Title
                          </label>
                          <div class="form__note">
                            Give your design a name!
                          </div>
                          <input class="form__control" placeholder="Title" tabindex="1" type="text" value="" name="" id="design_design_title">
                          <p id="designTitleError"></p>
                        </div>
                        <div class="form__field">
                          <label class="label--heavy">
                            Description
                          </label>
                          <div class="form__note">
                            Describe your design in a short sentence or two!
                          </div>
                          <textarea maxlength="750" class="form__control textarea" placeholder="Describe your design" tabindex="3" id="design_design_description"></textarea>
                          <p id="designDescriptionError"></p>
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-12">
                        <div class="form__field">
                          <label class="label--heavy">
                            Main Tag
                          </label>
                          <div class="form__note">
                            What (1) tag would I search to find your design?
                          </div>
                          <input class="form__control ui-autocomplete-input" tabindex="2" placeholder="Main tag" maxlength="39" size="39" type="text" id="design_primary_tag" data-original-title="">
                          <p id="primaryTagError"></p>

                        </div>
                        <div class="form__field">
                          <label class="label--heavy">
                            Supporting Tags
                          </label>
                          <div class="form__note">
                            What other relevant tags would customers use to find your
                          </div>

                          <textarea name="" class="input form__control textarea clearfix form__control--fit-content" id="supporting_tag"></textarea>
                          <p id="supportingTagError"></p>
                        </div>
                      </div>
                      <div class="col-lg-12 col-md-12">
                        <div class="form__field">
                          <label class="label--heavy">
                            Price
                          </label>
                          <div class="form__note">
                            Enter Your Price
                          </div>
                          <input class="form__control" placeholder="Price" tabindex="1" type="text" value="" name="" id="enterYourPrice">
                          <p id="priceError"></p>
                        </div>

                      </div>

                    </div>
                    <div class="clear"></div>
                  </div>


                  <div class="canvas-selection m-uploader__panel" style="">
                    <hr class="hr--light-1">

                    <% if (currentShop=='print' ) { %>
                    <div class="canvas-container x print <%- currentShop == 'print' && 'current-canvas captureDiv' -%>" data-activecanvas="true" data-canvas="print" data-canvas_id="6">
                      <div class="editor-container">
                        <div class="mockup-container active">
                          <div class="mockup-display-preview r1x1 Portrait">
                            <div class="mockup-boundaries print">
                              <img class="mutable-preview ui-draggable ui-draggable-handle ui-draggable-disabled" src="" style="width: 608.427px; height: 442px; top: 0px; left: -83.2134px;">
                              <div class="m-uploader_center-axis vertical"></div>
                              <div class="m-uploader_center-axis horizontal"></div>
                            </div>
                          </div>
                        </div>
                        <div class="m-uploader-toolbar jsUploaderPrintToolbar hidden">
                          <div class="m-uploader-toolbar_tools">
                            <div class="m-uploader-toolbar_label">
                              Tools
                            </div>
                            <div class="m-uploader-toolbar_color-selector">
                              <div class="minicolors minicolors-theme-default minicolors-position-bottom minicolors-position-left">
                                <input class="jsUploaderPrintColor jsUploaderColor minicolors-input" type="text" value="" name="design[mockup_config_print_attributes][bg_color]" id="design_mockup_config_print_attributes_bg_color" size="7"><span class="minicolors-swatch"><span class="minicolors-swatch-color" style="background-color: rgb(255, 255, 255);"></span></span>
                                <div class="minicolors-panel minicolors-slider-hue">
                                  <div class="minicolors-slider">
                                    <div class="minicolors-picker" style="top: 0px;"></div>
                                  </div>
                                  <div class="minicolors-opacity-slider">
                                    <div class="minicolors-picker"></div>
                                  </div>
                                  <div class="minicolors-grid" style="background-color: rgb(255, 0, 0);">
                                    <div class="minicolors-grid-inner"></div>
                                    <div class="minicolors-picker" style="top: 150px; left: 0px;">
                                      <div></div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="m-uploader-toolbar_tool m-uploader-toolbar_tool-dropper jsOpenColorDropper" data-label="Prints" data-selector="#design_mockup_config_print_attributes_bg_color" title="Color Dropper"></div>
                            <div class="m-uploader-toolbar_tool m-uploader-toolbar_tool-h-align jsUploaderPrintHAlign" title="Center Horizontally"></div>
                            <div class="m-uploader-toolbar_tool m-uploader-toolbar_tool-v-align jsUploaderPrintVAlign" title="Center Vertically"></div>
                          </div>
                          <div class="m-uploader-toolbar_scaler jsUploaderPrintToolbarScaler">
                            <div class="m-uploader-toolbar_label">
                              Scale
                            </div>
                            <div class="m-uploader-toolbar_scaler-input">
                              <input min="0" max="300" step="1" class="jsUploaderPrintScaler" type="range" value="88" name="design[mockup_config_print_attributes][image_size]" id="design_mockup_config_print_attributes_image_size">
                            </div>
                            <div class="m-uploader-toolbar_scaler-label jsUploaderPrintScalerLabel">
                              88%
                            </div>
                          </div>
                        </div>
                        <div class="m-uploader-toolbar jsUploaderPrintToolbarInactive">
                          <div class="m-uploader-toolbar_tools">
                            <div class="m-uploader-toolbar_message">
                              You cannot edit design size/placement when full-bleed
                              wall art is turned on.
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="clear"></div>
                    </div>

                    <% } %>



                    <% if (currentShop=='apparel' ) { %>
                  <div class="">
                    <canvas id="canvas"></Canvas>
                      <input type="file" id="input-file">
                      <img src="https://res.cloudinary.com/teepublic/image/upload/s--wtJATV5C--/c_limit,h_490,w_490/f_auto,q_auto:good/v1462829024/production/blanks/a59x1cgomgu5lprfjlmi" id="image" class="img-fluid d-none">
                      <img src="4_f2637d49-dec3-4117-b2b2-7c25693eb55b.webp" id="image2" class="img-fluid d-none">
                      <button type="button" id="change_image">change image</button>
                      <button type="button" id="getdata">get Canva</button>
                  </div>
                    <% } %>


                    <% if (currentShop=='pillow' ) { %>
                    <div class="canvas-container x pillow <%- currentShop == 'pillow' && 'current-canvas captureDiv' -%>" data-activecanvas="true" data-canvas="pillow" data-canvas_id="17">
                      <div class="editor-container pillow">

                        <div class="mockup-container active">
                          <div class="mockup-display-preview" style="background-image: url('https://img.freepik.com/free-photo/white-plain-eco-bag-with-black-handle-mockup_1409-4307.jpg?t=st=1715363196~exp=1715366796~hmac=f3d07622a95c7cf4bf9acfe4552293716f3e543f4b5bc259d3e53045fbd646b2&w=740'); background-repeat:no-repeat; background-size:cover;">
                            <div class="mockup-boundaries pillow">
                              <img class="mutable-preview ui-draggable ui-draggable-handle" src="" style="width: 304.5px; height: 221.208px; top: 0px; left: 0px;">
                              <div class="m-uploader_center-axis vertical"></div>
                              <div class="m-uploader_center-axis horizontal"></div>
                            </div>
                          </div>
                        </div>
                        <div class="m-uploader-toolbar jsUploaderPillowToolbar">
                          <div class="m-uploader-toolbar_tools">
                            <div class="m-uploader-toolbar_label">
                              Tools
                            </div>
                            <div class="m-uploader-toolbar_color-selector">
                              <div class="minicolors minicolors-theme-default minicolors-position-bottom minicolors-position-left">
                                <input class="jsUploaderPillowColor jsUploaderColor minicolors-input" type="text" value="" name="design[mockup_config_pillow_attributes][bg_color]" id="design_mockup_config_pillow_attributes_bg_color" size="7"><span class="minicolors-swatch"><span class="minicolors-swatch-color"></span></span>
                                <div class="minicolors-panel minicolors-slider-hue">
                                  <div class="minicolors-slider">
                                    <div class="minicolors-picker" style="top: 0px;"></div>
                                  </div>
                                  <div class="minicolors-opacity-slider">
                                    <div class="minicolors-picker"></div>
                                  </div>
                                  <div class="minicolors-grid" style="background-color: rgb(255, 0, 0);">
                                    <div class="minicolors-grid-inner"></div>
                                    <div class="minicolors-picker" style="top: 150px; left: 0px;">
                                      <div></div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="m-uploader-toolbar_tool m-uploader-toolbar_tool-dropper jsOpenColorDropper" data-label="Pillows" data-selector="#design_mockup_config_pillow_attributes_bg_color" title="Color Dropper"></div>
                            <div class="m-uploader-toolbar_tool m-uploader-toolbar_tool-h-align jsUploaderPillowHAlign" title="Center Horizontally"></div>
                            <div class="m-uploader-toolbar_tool m-uploader-toolbar_tool-v-align jsUploaderPillowVAlign" title="Center Vertically"></div>
                          </div>
                          <div class="m-uploader-toolbar_scaler">
                            <div class="m-uploader-toolbar_label">
                              Scale
                            </div>
                            <div class="m-uploader-toolbar_scaler-input">
                              <input min="1" max="400" step="1" class="jsUploaderPillowScaler" type="range" id="design_mockup_config_pillow_attributes_image_size">
                            </div>
                            <div class="m-uploader-toolbar_scaler-label jsUploaderPillowScalerLabel">
                              75%
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="toolbar">
                        <div class="right-col">
                          <div class="m-uploader_grey-box">
                            <h2>
                              Pillows
                            </h2>
                            <div>
                              Position and size your design on the pillow to the left.
                              Be sure to pick a background color!
                            </div>
                          </div>
                        </div>
                        <div class="clear"></div>
                      </div>
                    </div>
                    <% } %>

                    <% if (currentShop=='tote' ) { %>
                    <div class="canvas-container x tote <%- currentShop == 'tote' && 'current-canvas captureDiv' -%>" data-activecanvas="true" data-canvas="tote" data-canvas_id="18">
                      <div class="editor-container tote">
                        <input autocomplete="off" type="hidden" value="0" id="design_mockup_config_tote_attributes_position_top">
                        <input autocomplete="off" type="hidden" value="0" id="design_mockup_config_tote_attributes_position_left">
                        <div class="mockup-container active">
                          <div class="mockup-display-preview">
                            <div class="mockup-boundaries tote">
                              <img class="mutable-preview ui-draggable ui-draggable-handle" src="" style="width: 328.44px; height: 238.6px; top: 0px; left: 0px;">
                              <div class="m-uploader_center-axis vertical"></div>
                              <div class="m-uploader_center-axis horizontal"></div>
                            </div>
                          </div>
                        </div>
                        <div class="m-uploader-toolbar jsUploaderToteToolbar">
                          <div class="m-uploader-toolbar_tools">
                            <div class="m-uploader-toolbar_label">
                              Tools
                            </div>
                            <div class="m-uploader-toolbar_color-selector">
                              <div class="minicolors minicolors-theme-default minicolors-position-bottom minicolors-position-left">
                                <input class="jsUploaderToteColor jsUploaderColor minicolors-input" type="text" value="" id="design_mockup_config_tote_attributes_bg_color" size="7"><span class="minicolors-swatch"><span class="minicolors-swatch-color"></span></span>
                                <div class="minicolors-panel minicolors-slider-hue">
                                  <div class="minicolors-slider">
                                    <div class="minicolors-picker" style="top: 0px;"></div>
                                  </div>
                                  <div class="minicolors-opacity-slider">
                                    <div class="minicolors-picker"></div>
                                  </div>
                                  <div class="minicolors-grid" style="background-color: rgb(255, 0, 0);">
                                    <div class="minicolors-grid-inner"></div>
                                    <div class="minicolors-picker" style="top: 150px; left: 0px;">
                                      <div></div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="m-uploader-toolbar_tool m-uploader-toolbar_tool-dropper jsOpenColorDropper" data-label="Totes" data-selector="#design_mockup_config_tote_attributes_bg_color" title="Color Dropper"></div>
                            <div class="m-uploader-toolbar_tool m-uploader-toolbar_tool-h-align jsUploaderToteHAlign" title="Center Horizontally"></div>
                            <div class="m-uploader-toolbar_tool m-uploader-toolbar_tool-v-align jsUploaderToteVAlign" title="Center Vertically"></div>
                          </div>
                          <div class="m-uploader-toolbar_scaler">
                            <div class="m-uploader-toolbar_label">
                              Scale
                            </div>
                            <div class="m-uploader-toolbar_scaler-input">
                              <input min="1" max="200" step="1" class="jsUploaderToteScaler" type="range" value="84.0" id="design_mockup_config_tote_attributes_image_size">
                            </div>
                            <div class="m-uploader-toolbar_scaler-label jsUploaderToteScalerLabel">
                              84%
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="toolbar">
                        <div class="right-col">
                          <div class="m-uploader_grey-box">
                            <h2>
                              Tote Bags
                            </h2>
                            <div>
                              Position and size your design on the tote bag to the
                              left. Be sure to pick a background color!
                            </div>
                          </div>
                        </div>
                        <div class="clear"></div>
                      </div>
                    </div>

                    <% } %>

                    <hr class="hr--heavy hr--light-1">
                    <div class="additional-canvases">
                      <div class="h__h3">Configure Other Products</div>
                      <div class="additional-canvases-container">

                        <% MocuckUp.map((item)=>{ %>

                        <% if(item.category == 'apparel'){ %>
                        <div class="canvas apparel" data-canvas-name="T-Shirt" data-canvas="apparel">
                          <div>
                            <div class="mockup-display-preview enabled mockup-display-preview">
                              <div class="img-holder">
                                <img src="https://res.cloudinary.com/teepublic/image/upload/s--wtJATV5C--/c_limit,h_490,w_490/f_auto,q_auto:good/v1462829024/production/blanks/a59x1cgomgu5lprfjlmi">
                              </div>
                              <div class="canvas--selected">
                                Currently Editing
                              </div>
                              <div class="mockup-boundaries">
                                <img class="mutable-preview" src="" style="width: 41px; height: 29.785px; top: 0px; left: 0px;">
                              </div>
                            </div>
                            <div class="name">
                              <h2>Apparel</h2>
                            </div>
                            <div class="buttons">
                              <a id="apparelLink" class="on-off enabled">
                                <span class="<%- currentShop == 'apparel' ? 'enabled' : 'disabled' -%>"></span>
                              </a>
                            </div>
                          </div>
                        </div>
                        <% } %>

                        <% if(item.category == 'print') {  %>
                        <div class="canvas pillow" data-canvas-name="Pillow" data-canvas="pillow">
                          <div>
                            <div class="mockup-display-preview enabled mockup-display-preview">
                              <div class="img-holder">
                              </div>
                              <div class="canvas--selected">
                                Currently Editing
                              </div>
                              <div class="mockup-boundaries">
                                <img class="mutable-preview" src="https://img.freepik.com/free-psd/white-soft-pillow_176382-1116.jpg?size=626&ext=jpg&ga=GA1.1.1278651296.1711881324&semt=ais" style="width: 64.5px; height: 46.8569px; top: 0px; left: 0px;">
                              </div>
                            </div>
                            <div class="name">
                              <h2>Pillows</h2>
                            </div>
                            <div class="buttons">
                              <a id="pillow" class="on-off enabled">
                                <span class="<%- currentShop == 'pillow' ? 'enabled' : 'disabled' -%>"></span>
                              </a>
                            </div>
                          </div>
                        </div>
                        <% } %>


                        <% }) %>





                      </div>

                    </div>
                  </div>
                </div>


                <div class="additional-stores" style="display:none;">
                  <h2>Add to your Affiliate Stores</h2>
                </div>
                <div class="bottom-actions m-uploader__panel" style="">
                  <div class="canvas-option-hidden">

                  </div>
                  <label for="terms"><input type="checkbox" name="terms" id="terms" value="read">
                    <span>I have read and agree to the</span>
                    <a rel="nofollow" target="_blank" href="/terms" class="link link--1 link--default link--strong">
                      <span class="link__content">
                        Terms and Conditions
                      </span>

                    </a>
                  </label>
                  <div class="">
                  </div>
                </div>
                <% }%>
              </div>


          </div>
          </form>
          <div class="d-flex justify-content-center align-items-center">
            <!-- <button class="btn btn--big btn--green" id="SaveProduct">Add Product</button> -->
            <button class="btn btn-primary" id="SaveProduct">Add Product</button>
          </div>

        </div>
      </div>




    </div>
  </div>

  </div>
  <footer>
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-6 text-center text-lg-start mb-5 mb-lg-0">
          <div class="logo mb-3">
            <img src="../assets/images/logo.png" alt="" class="img-fluid">
          </div>
          <ul class="social-icon-list list-unstyled justify-content-center justify-content-lg-start d-flex flex-wrap gap-2">
            <li><a href="#"><i class="fab fa-facebook-f"></i></a></li>
            <li><a href="#"><i class="fab fa-instagram"></i></a></li>
            <li><a href="#"><i class="fab fa-pinterest-p"></i></a></li>
            <li><a href="#"><i class="fab fa-tiktok"></i></a></li>
          </ul>
        </div>
        <div class="col-lg-6">
          <ul class="footer-list list-unstyled d-flex flex-wrap justify-content-center justify-content-lg-end align-items-center gap-4">
            <li><a href="<%- baseUrl -%>/contact">Contact Us</a></li>
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">FAQS</a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.8/axios.min.js" integrity="sha512-PJa3oQSLWRB7wHZ7GQ/g+qyv6r4mbuhmiDb8BjSFZ8NZ2a42oTtAq5n0ucWAwcQDlikAtkub+tPVCw4np27WCg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.11.11/html-to-image.js"></script>
  <script>
    $(document).ready(function() {

        //render canvas
        const canvas = new fabric.Canvas("canvas", {
            width: 500,
            height: 500,
            backgroundColor: "gray",
        });

        //main image 
        const imgElement = $('#image')[0]; // Get the HTML img element
        const fabricImage = new fabric.Image(imgElement, {
            top: 0,
            left: 0,
            selectable: false,
            evented: false
        });

        fabricImage.scaleToWidth("500");
        fabricImage.scaleToHeight("500");
        canvas.add(fabricImage);
        //main image 


        // change main image
        $('#change_image').on('click', function() { // Get the HTML img element
            canvas.remove(fabricImage); // removing first image

            // adding image
            const imgElement2 = $('#image2')[0];
            const fabricImage2 = new fabric.Image(imgElement2, {
                top: 0,
                left: 0,
                selectable: false,
                evented: false
            });

            fabricImage2.scaleToWidth("500");
            fabricImage2.scaleToHeight("500");
            canvas.add(fabricImage2);

        });


        let currentImage = null;

        // Image from input type file
        $("#input-file").on('change', function(e) {

            const file = e.target.files[0];
            if (file) {

                // Remove previous image if User Select another image
                if (currentImage) {
                    canvas.remove(currentImage);
                }

                const imageUrl = URL.createObjectURL(file);
                fabric.Image.fromURL(imageUrl, function(img) {
                    img.set({
                        top: 50,
                        left: 50,
                    });
                    img.scaleToHeight(100);
                    img.scaleToWidth(100);
                    canvas.add(img);

                    currentImage = img;
                    canvas.renderAll();
                });
            }
        });


        // getting canvas data 
        $('#getdata').on('click', function() {
            const canvasImageData = canvas.toDataURL();
            console.log(canvasImageData);

            const base64Image = canvasImageData.replace(/^data:image\/(png|jpeg);base64,/, '');

            const binaryString = window.atob(base64Image);
            const binaryData = new Uint8Array(binaryString.length);
            for (let i = 0; i < binaryString.length; i++) {
                binaryData[i] = binaryString.charCodeAt(i);
            }


            const blob = new Blob([binaryData], {
                type: 'image/png'
            });


            const blobUrl = URL.createObjectURL(blob);


            const downloadLink = document.createElement('a');
            downloadLink.href = blobUrl;
            downloadLink.download = 'my-image.png';


            document.body.appendChild(downloadLink);
            downloadLink.click();
        });
    });
</script>
 <script>
    $('#apparelLink').click(function() {
      const urlParams = new URLSearchParams(window.location.search);
      const designUploadValue = urlParams.get('design_upload');

      window.location.href = `/upload-v2?category=apparel&design_upload=${designUploadValue}`

    });


    $('#pillow').click(function() {
      const urlParams = new URLSearchParams(window.location.search);
      const designUploadValue = urlParams.get('design_upload');

      window.location.href = `/upload-v2?category=pillow&design_upload=${designUploadValue}`

    });


    $('#tote').click(function() {
      const urlParams = new URLSearchParams(window.location.search);
      const designUploadValue = urlParams.get('design_upload');

      window.location.href = `/upload-v2?category=tote&design_upload=${designUploadValue}`

    });




    $('#uploadDesign').on('click', function() {
      var fileInput = $('#uploadDesignImage')[0].files[0];
      var formData = new FormData();
      formData.append('image', fileInput);

      console.log(formData)

      $.ajax({
        url: '/api/upload',
        type: 'POST',
        data: formData,
        contentType: false,
        processData: false,
        success: function(response) {
          console.log(response);
          localStorage.setItem('designUploadedUrl', response);

          // Update designUploaded and designUploadedCheck
          var designUploaded = true;
          var designUploadedCheck = true;

          // Show/hide elements based on upload status
          $('.jsUploaderArtwork').show();
          $('#uploadImage').hide();

          // Update localStorage values
          localStorage.setItem('designUploaded', designUploaded);
          localStorage.setItem('designUploadedCheck', designUploadedCheck);


          localStorage.setItem('designUploadedUrl', response);


          const urlParams = new URLSearchParams(window.location.search);
          urlParams.set('design_upload', 'true');
          const newUrl = window.location.pathname + '?' + urlParams.toString();
          window.history.replaceState({}, '', newUrl);
          window.location.reload();
          var designUrl = localStorage.getItem('designUploadedUrl')

          console.log(designUrl)


          $('#uploader-preview-image').attr('src', designUrl);
          $('.mutable-preview').attr('src', designUrl);
        },
        error: function(xhr, status, error) {
          console.error(xhr.responseText);
        }
      });
    });

    // Trigger change event immediately after selecting a file
    $('#uploadDesignImage').change(function() {
      $(this).click();
    });

    $("#changeArtwork").click(function() {
      // Update the URL to include design_upload=false
      window.location.href = '/upload-v2?category=pillow&design_upload=false'

    });

    function updateUrlParameter(url, param, value) {
      const urlParams = new URLSearchParams(url);
      urlParams.set(param, value);
      return url.split('?')[0] + '?' + urlParams.toString();
    }
  </script>

  <script type="module">
    import {
      initializeApp
    } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
    import {
      getStorage,
      ref,
      uploadString,
      getDownloadURL,
      uploadBytes
    } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-storage.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCmpnrRYeBVc5xYb_p5cRiMHB3A8X6rooU",
      authDomain: "merhcbazar.firebaseapp.com",
      projectId: "merhcbazar",
      storageBucket: "merhcbazar.appspot.com",
      messagingSenderId: "234938435232",
      appId: "1:234938435232:web:c31b149247347ed2da6bc5"
    };

    const app = initializeApp(firebaseConfig);
    const storage = getStorage(app);

    document.getElementById('SaveProduct').addEventListener('click', function() {
      document.getElementById('SaveProduct').addEventListener('click', async function(event) {
        console.log('fsdfds ');

        var currentCanvas = document.querySelector('.canvas-container.current-canvas .mockup-container.active .mockup-display-preview');
        // var currentCanvas = document.querySelector('.editor-container.pillow');
        console.log(currentCanvas);

        var design_design_title = document.getElementById('design_design_title').value;
        var design_design_description = document.getElementById('design_design_description').value;
        var design_primary_tag = document.getElementById('design_primary_tag').value;
        var supporting_tag = document.getElementById('supporting_tag').value;
        var designPrice = document.getElementById('enterYourPrice').value;

        if (design_design_title == '') {
          document.getElementById('designTitleError').textContent = 'Please Add Title';
          document.getElementById('designTitleError').style.color = 'red';
          return;
        } else {
          document.getElementById('designTitleError').textContent = '';
        }

        if (design_design_description == '') {
          document.getElementById('designDescriptionError').textContent = 'Please Add Description';
          document.getElementById('designDescriptionError').style.color = 'red';
          return;
        } else {
          document.getElementById('designDescriptionError').textContent = '';
        }

        if (design_primary_tag == '') {
          document.getElementById('primaryTagError').textContent = 'Please Add Primary Tag';
          document.getElementById('primaryTagError').style.color = 'red';
          return;
        } else {
          document.getElementById('primaryTagError').textContent = '';
        }

        if (supporting_tag == '') {
          document.getElementById('supportingTagError').textContent = 'Please Add Supporting Tag';
          document.getElementById('supportingTagError').style.color = 'red';
          return;
        } else {
          document.getElementById('supportingTagError').textContent = '';
        }

        if (designPrice == '') {
          document.getElementById('priceError').textContent = 'Please Add Price';
          document.getElementById('priceError').style.color = 'red';
          return;
        } else {
          document.getElementById('priceError').textContent = '';
        }

        const dataUrl = await htmlToImage.toPng(currentCanvas);
        console.log(dataUrl);

       
        const storageRef = ref(storage, Date.now() + 'productImage');
        await uploadString(storageRef, dataUrl, 'data_url').then((snapshot) => {
          console.log('Uploaded a base64 string!');
        });

        const url = await getDownloadURL(ref(storage, storageRef));
        console.log(url);

        try {
          const response = await axios.post('/api/create-store-data', {
            title: design_design_title,
            mainTag: design_primary_tag,
            description: design_design_description,
            supportingTags: supporting_tag,
            album: '1',
            designImage: url,
            productId: '662d1e88fd7f54cb49b990d5',
            designPrice: designPrice,
          });

          console.log(response.data);


          var artistId = $('#artistId').val()

          await axios.post(`/api/update-store/${artistId}`).then((res) => {
            console.log(res.data);
          }).catch((error) => {
            console.log(res.data);
          });

          var design_Image = localStorage.getItem('designUploadedUrl');


          await axios.post('/api/upload-design', {
            title: design_design_title,
            mainTag: design_primary_tag,
            description: design_design_description,
            supportingTags: supporting_tag,
            album: '1',
            designImage: design_Image,
            productId: '662d1e88fd7f54cb49b990d5',
            designPrice: designPrice,
          }).then((res)=>{
            console.log(res.data)
          }).catch((error)=>{
            console.log(error)
          })
          toastr.success('Have fun storming the castle!', 'Miracle Max Says')
        } catch (error) {
          console.log(error);
        }

        console.log('fsdfds ');
      });
    })




    $(".mutable-preview").each(function() {
  $(this).draggable();
  // $(this).resizable();
});



    // $('.mockup-boundaries.pillow .mutable-preview').draggable();



    // $('.jsUploaderArtwork').hide()

    // var designUploaded = false;
    // var designUploadedCheck = false;
    // var designUploadedUrl = '';

    // // Retrieve existing values from localStorage
    // var storedDesignUploaded = localStorage.getItem('designUploaded');
    // var storedDesignUploadedCheck = localStorage.getItem('designUploadedCheck');
    // var storedDesignUploadedUrl = localStorage.getItem('designUploadedUrl');

    // if (storedDesignUploadedUrl !== '') {
    //   $('#uploader-preview-image').attr('src', storedDesignUploadedUrl);
    //   $('.mutable-preview').attr('src', storedDesignUploadedUrl);
    // }

    // // Check if URL already exists in localStorage
    // if (storedDesignUploadedUrl && storedDesignUploadedUrl !== '') {
    //   designUploadedUrl = storedDesignUploadedUrl;
    //   designUploaded = true;
    //   designUploadedCheck = true;
    //   $('.jsUploaderArtwork').show()
    //   // $('#uploadImage').hide()
    //   $('#SaveProduct').show()

    // } else {
    //   $('#uploadImage').show()
    //   $('#SaveProduct').hide()
    // }




    // Update localStorage values
    localStorage.setItem('designUploaded', designUploaded);
    localStorage.setItem('designUploadedCheck', designUploadedCheck);
    localStorage.setItem('designUploadedUrl', designUploadedUrl);

    // Trigger change event immediately after file is selected
    // Trigger change event immediately after file is selected

    $('.jsChangeArtwork').click(function() {
      localStorage.setItem('designUploaded', false);
      localStorage.setItem('designUploadedCheck', false);
      localStorage.setItem('designUploadedUrl', '');
      window.location.reload();

      var storedDesignUploadedUrl = localStorage.getItem('designUploadedUrl');

      if (storedDesignUploadedUrl !== '') {
        $('#uploader-preview-image').attr('src', storedDesignUploadedUrl);
        $('.mutable-preview').attr('src', storedDesignUploadedUrl);
      }
    })
  </script>



  <script>
    // Retrieve image URL from localStorage
    var designUploadedUrl = localStorage.getItem('designUploadedUrl');

    // Check if designUploadedUrl exists and is not empty
    if (designUploadedUrl) {
      console.log(designUploadedUrl)
      $('.mutable-preview').attr('src', designUploadedUrl);
      $('#uploader-preview-image').attr('src', designUploadedUrl);
    }
  </script>



</body>

</html>